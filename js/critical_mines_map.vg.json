{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 600,
  "height": 450,
  "title": "Critical Australian Mine Sites and Mineral Deposits 2023",
  "projection": {"type": "mercator"},
  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/milnay/FIT3179-DataViz2/refs/heads/main/js/ne_110m_graticules_30.json",
        "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
      },
      "mark": {
        "type": "geoshape",
        "fill": null,
        "stroke": "lightgray"
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/milnay/FIT3179-DataViz2/refs/heads/main/js/aus%20map%20with%20no%20labels.json",
         "format": {
          "type": "topojson", "feature": "STE_2021_AUST_GDA2020"
        }
        },
      "mark": {
        "type": "geoshape", 
        "fill": "#D1B28C", 
        "fillOpacity": 0.8,
        "stroke": "#2B2B2B", 
        "strokeOpacity": 0.5, 
        "strokeWidth": 0.5
      }
      
    },
    {
      "data":{
        "url": "https://raw.githubusercontent.com/milnay/FIT3179-DataViz2/refs/heads/main/data/critical_mines_grouped.csv",
        "format":{"type": "csv"}
      },
      "transform": [
        {
          "calculate": "(-27.6728)", "as": "WA_lat"
        },
        {
          "calculate": "(121.6283)", "as": "WA_lon"
        }, 
        {
          "window": [
            {
              "op":"row_number", "as": "row_num"
            }
          ]
        },
        {
          "filter": "datum.row_num == 1"
        }
      ],
      "mark":{
        "type": "text",
        "align": "left",
        "dx": 250,  
        "dy": -110,
        "fontWeight":"lighter",
        "color":"#2B2B2B",
        "font": "serif"
      },
      "encoding": {
        "longitude": {
          "field": "WA_lon",
          "type": "quantitative"
        }, 
        "latitude": {
          "field": "WA_lat", 
          "type": "quantitative"
        },   
        "text": {
          "value":["In 2023, Australia produced 27 minerals,", "15 of which ranked in the top five for global supply.  "]
          
        }}
    }, 
    {
      "data": {
      "values": [
        {"State": "New South Wales", "lat": -31.2532, "lon": 146.9211},
        {"State": "Victoria", "lat": -37.4713, "lon": 144.7852},
        {"State": "Queensland", "lat": -20.9176, "lon": 142.7028},
        {"State": "South Australia", "lat": -30.0002, "lon": 136.2092},
        {"State": "Western Australia", "lat": -27.6728, "lon": 121.6283},
        {"State": "Tasmania", "lat": -42.0409, "lon": 146.8087},
        {"State": "Northern Territory", "lat": -19.4914, "lon": 132.5505},
        {"State": "Australian Capital Territory", "lat": -35.4735, "lon": 149.0124}
      ]},
      "mark": {
        "type": "text",
        "dy": -10,
        "fontSize": 9,
        "fontWeight": 200,
        "color": "black", 
        "fontStyle": "italic"
      },
      "encoding": {
        "longitude": {"field": "lon", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "text": {"field": "State"}
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/milnay/FIT3179-DataViz2/refs/heads/main/data/critical_mines_grouped.csv",
        "format": {"type": "csv"}
      },
      "params": [
        {
          "name": "highlight",
          "select":{
            "type": "point",
            "fields": ["Mineral Type"]
          },
          "bind":"legend"
        }
      ],
        "mark": {
          "type": "circle",
          "stroke": "black", 
          "strokeOpacity": 0.6, 
          "strokeWidth": 0.4, 
          "fillOpacity": 0.9,
          "tooltip": true, 
          "size": 70

        },
        "encoding": {
          "longitude": {"field": "Longitude", 
          "type": "quantitative"},
          "latitude": {"field": "Latitude", "type": "quantitative"},
          "color": {
            "field": "Mineral Type",
            "type": "nominal",
          "title": "Mineral Type",
          "scale": {
            "domain": ["Base Metals and Alloys", "Other", 
            "Rare Earth Elements", "Silica, Graphite, and Fluorine"],
            "range":[
              "#8B5D3E", "#D55C38","#C49E55", "#3A7F87"
            ]
          }
          },
          "opacity":{
            "condition": {
              "param": "highlight",
              "value": 0.8
            }, "value":0.1
          },
          "tooltip": [
          {"field": "State", "type": "nominal"},
          {"field": "Name", "title": "Site Name"},
          {"field": "Commodity Group", "type": "nominal", "title": "Mineral"},
          {"field": "Status", "type": "nominal", "title":"Operating Status"}]
        }
    
    }
  ],
  "background": "aliceblue"
}
